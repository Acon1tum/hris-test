generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// MODULE MANAGEMENT
// ============================================

model Module {
  id          String   @id @default(cuid())
  name        String   @unique // e.g., "E-Payroll"
  slug        String   @unique // e.g., "e-payroll"
  description String?
  isActive    Boolean  @default(true)
  isStandalone Boolean @default(false)
  icon        String?
  order       Int      @default(0)
  color       String?  // For UI theming
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  permissions Permission[]
  roleModules RoleModule[]

  @@index([slug])
  @@index([isActive])
  @@map("modules")
}

// ============================================
// RBAC SYSTEM - Dynamic Permissions
// ============================================

model Permission {
  id          String   @id @default(cuid())
  name        String   // e.g., "Create Employee"
  slug        String   @unique // e.g., "employee:create"
  description String?
  moduleId    String
  module      Module   @relation(fields: [moduleId], references: [id], onDelete: Cascade)
  resource    String   // e.g., "employee", "payroll", "leave"
  action      String   // e.g., "create", "read", "update", "delete", "approve", "export"
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  rolePermissions RolePermission[]

  @@unique([moduleId, resource, action])
  @@index([moduleId])
  @@index([slug])
  @@index([resource])
  @@map("permissions")
}

model Role {
  id          String   @id @default(cuid())
  name        String   @unique
  description String?
  isSystem    Boolean  @default(false) // System roles can't be deleted
  priority    Int      @default(0) // For role hierarchy
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  rolePermissions RolePermission[]
  roleModules     RoleModule[]
  userRoles       UserRole[]

  @@index([name])
  @@map("roles")
}

model RolePermission {
  id           String     @id @default(cuid())
  roleId       String
  permissionId String
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  createdAt    DateTime   @default(now())

  @@unique([roleId, permissionId])
  @@index([roleId])
  @@index([permissionId])
  @@map("role_permissions")
}

model RoleModule {
  id        String   @id @default(cuid())
  roleId    String
  moduleId  String
  canAccess Boolean  @default(true)
  role      Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)
  module    Module   @relation(fields: [moduleId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([roleId, moduleId])
  @@index([roleId])
  @@index([moduleId])
  @@map("role_modules")
}

// ============================================
// USER MANAGEMENT
// ============================================

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  password      String
  firstName     String
  lastName      String
  middleName    String?
  suffix        String?   // e.g., "Jr.", "Sr.", "II", "III"
  profileImage  String?
  phoneNumber   String?
  mobileNumber  String?   // Separate mobile number (Philippine format)
  landline      String?   // Landline number
  isActive      Boolean   @default(true)
  emailVerified Boolean   @default(false)
  lastLoginAt   DateTime?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  userRoles      UserRole[]
  employee       Employee?
  createdLeaves  Leave[]          @relation("CreatedBy")
  approvedLeaves Leave[]          @relation("ApprovedBy")
  attendances    Attendance[]
  performanceReviews PerformanceReview[]

  @@index([email])
  @@index([isActive])
  @@map("users")
}

model UserRole {
  id        String   @id @default(cuid())
  userId    String
  roleId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  role      Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([userId, roleId])
  @@index([userId])
  @@index([roleId])
  @@map("user_roles")
}

// ============================================
// EMPLOYEE MANAGEMENT
// ============================================

model Department {
  id          String     @id @default(cuid())
  name        String     @unique
  code        String     @unique
  description String?
  isActive    Boolean    @default(true)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  employees Employee[]
  jobs      Job[]

  @@map("departments")
}

model Designation {
  id          String     @id @default(cuid())
  title       String     @unique
  code        String     @unique
  description String?
  level       Int        @default(1)
  isActive    Boolean    @default(true)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  employees Employee[]

  @@map("designations")
}

model Employee {
  id               String      @id @default(cuid())
  employeeNumber   String      @unique
  userId           String      @unique
  user             User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  departmentId     String
  department       Department  @relation(fields: [departmentId], references: [id])
  designationId    String
  designation      Designation @relation(fields: [designationId], references: [id])
  
  // ============================================
  // PHILIPPINE GOVERNMENT ID NUMBERS
  // ============================================
  tin              String?     @unique // Tax Identification Number (TIN)
  sssNumber        String?     @unique // Social Security System number
  philhealthNumber String?     @unique // Philippine Health Insurance Corporation
  pagibigNumber    String?     @unique // Home Development Mutual Fund (HDMF)
  gsisNumber       String?     @unique // Government Service Insurance System
  cscIdNumber      String?     // Civil Service Commission ID
  licenseNumber    String?     // Professional License Number (e.g., PRC)
  licenseExpiryDate DateTime?  // License expiration date
  
  // ============================================
  // PERSONAL INFORMATION
  // ============================================
  dateOfBirth      DateTime?
  placeOfBirth     String?     // City/Municipality, Province
  gender           Gender?
  maritalStatus    MaritalStatus?
  nationality      String      @default("Filipino")
  citizenship      String      @default("Filipino")
  bloodType        String?     // A+, A-, B+, B-, AB+, AB-, O+, O-
  height           Decimal?    @db.Decimal(5, 2) // in cm
  weight           Decimal?    @db.Decimal(5, 2) // in kg
  religion         String?
  
  // ============================================
  // PHILIPPINE ADDRESS (Complete Format)
  // ============================================
  // Permanent Address
  permanentAddressLine1  String?  // Street/Barangay/Building
  permanentAddressLine2  String?  // Subdivision/Village
  permanentBarangay      String?  // Barangay
  permanentCity          String?  // City/Municipality
  permanentProvince      String?  // Province
  permanentRegion        String?  // Region
  permanentZipCode       String?  // ZIP Code
  
  // Present/Residential Address (if different from permanent)
  presentAddressLine1    String?
  presentAddressLine2    String?
  presentBarangay        String?
  presentCity            String?
  presentProvince        String?
  presentRegion          String?
  presentZipCode         String?
  
  // Legacy fields (for backward compatibility)
  address          String?
  city             String?
  state            String?
  zipCode          String?
  country          String      @default("Philippines")
  
  // ============================================
  // EMERGENCY CONTACT INFORMATION
  // ============================================
  emergencyContactName         String?
  emergencyContactRelationship String?  // e.g., "Spouse", "Parent", "Sibling"
  emergencyContactNumber       String?
  emergencyContactAddress      String?
  
  // ============================================
  // FAMILY INFORMATION
  // ============================================
  spouseName       String?
  spouseOccupation String?
  spouseEmployer   String?
  spouseContactNumber String?
  numberOfDependents Int        @default(0)
  
  // ============================================
  // CIVIL SERVICE & ELIGIBILITY
  // ============================================
  civilServiceEligibility String?  // e.g., "Career Service Professional", "RA 1080"
  eligibilityRating       String?  // e.g., "87.50"
  eligibilityDate         DateTime?
  eligibilityPlace        String?  // Place where eligibility was obtained
  
  // ============================================
  // EMPLOYMENT INFORMATION
  // ============================================
  hireDate         DateTime
  employmentType   EmploymentType @default(FULL_TIME)
  employmentStatus EmploymentStatus @default(ACTIVE)
  separationDate   DateTime?     // Date of separation/termination
  separationReason String?       // Reason for separation
  
  // Manager relationship
  managerId        String?
  manager          Employee?   @relation("ManagerSubordinates", fields: [managerId], references: [id])
  subordinates     Employee[]  @relation("ManagerSubordinates")
  
  // Office assignment
  officeId         String?
  office           Office?     @relation(fields: [officeId], references: [id])
  
  // ============================================
  // COMPENSATION (Philippine Peso)
  // ============================================
  baseSalary       Decimal     @db.Decimal(12, 2)
  currency         String      @default("PHP")
  salaryGrade      Int?        // Salary Grade (SG) for government employees
  stepIncrement    Int?        @default(1) // Step increment (1-8)
  
  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt

  // Relations
  payrolls         Payroll[]
  leaves           Leave[]
  attendances      Attendance[]
  performanceReviews PerformanceReview[]
  healthRecords    HealthRecord[]
  jobApplications  JobApplication[]
  dependents       Dependent[]
  educationalBackgrounds EducationalBackground[]
  previousEmployments PreviousEmployment[]
  characterReferences CharacterReference[]

  @@index([employeeNumber])
  @@index([departmentId])
  @@index([designationId])
  @@index([managerId])
  @@index([officeId])
  @@index([tin])
  @@index([sssNumber])
  @@index([philhealthNumber])
  @@index([gsisNumber])
  @@index([cscIdNumber])
  @@map("employees")
}

enum Gender {
  MALE
  FEMALE
  OTHER
  PREFER_NOT_TO_SAY
}

enum MaritalStatus {
  SINGLE
  MARRIED
  WIDOWED
  LEGALLY_SEPARATED  // Legal separation (Philippine context)
  ANNULLED           // Annulment (Philippine context)
  // Note: Divorce is generally not recognized in the Philippines except for Muslims under Sharia law
}

enum EmploymentType {
  FULL_TIME
  PART_TIME
  CONTRACT
  INTERNSHIP
  TEMPORARY
}

enum EmploymentStatus {
  ACTIVE
  INACTIVE
  ON_LEAVE
  TERMINATED
  RESIGNED
  RETIRED
  AWOL              // Absent Without Leave
  SUSPENDED
}

// ============================================
// PHILIPPINE GOVERNMENT EMPLOYEE - ADDITIONAL MODELS
// ============================================

model Dependent {
  id          String   @id @default(cuid())
  employeeId  String
  employee    Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  
  firstName   String
  lastName    String
  middleName  String?
  relationship String  // e.g., "Spouse", "Child", "Parent", "Sibling"
  dateOfBirth DateTime
  occupation  String?
  isStudent   Boolean  @default(false)
  schoolName  String?  // If student
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([employeeId])
  @@map("dependents")
}

model EducationalBackground {
  id              String   @id @default(cuid())
  employeeId      String
  employee        Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  
  level           String   // e.g., "Elementary", "Secondary", "Vocational", "Bachelor's", "Master's", "Doctorate"
  schoolName      String
  course          String?  // Course/Degree
  yearGraduated   Int?
  honorsAwards    String?  // e.g., "Cum Laude", "Magna Cum Laude", "Summa Cum Laude"
  unitsEarned     String?  // For incomplete degrees
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([employeeId])
  @@map("educational_backgrounds")
}

model PreviousEmployment {
  id          String   @id @default(cuid())
  employeeId  String
  employee    Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  
  employerName    String
  position        String
  dateStarted     DateTime
  dateEnded       DateTime?
  isPresentJob    Boolean  @default(false)
  reasonForLeaving String?
  salary          Decimal? @db.Decimal(12, 2)
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([employeeId])
  @@map("previous_employments")
}

model CharacterReference {
  id          String   @id @default(cuid())
  employeeId  String
  employee    Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  
  name        String
  position    String
  company     String?
  contactNumber String?
  email       String?
  relationship String? // How they know the employee
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([employeeId])
  @@map("character_references")
}

// ============================================
// PAYROLL MANAGEMENT
// ============================================

model Payroll {
  id              String        @id @default(cuid())
  employeeId      String
  employee        Employee      @relation(fields: [employeeId], references: [id])
  payPeriodStart  DateTime
  payPeriodEnd    DateTime
  payDate         DateTime
  
  basicSalary     Decimal       @db.Decimal(12, 2)
  allowances      Decimal       @db.Decimal(12, 2) @default(0)
  deductions      Decimal       @db.Decimal(12, 2) @default(0)
  tax             Decimal       @db.Decimal(12, 2) @default(0)
  netSalary       Decimal       @db.Decimal(12, 2)
  
  // Philippine Government Deductions
  sssDeduction    Decimal?      @db.Decimal(12, 2) // SSS Contribution
  philhealthDeduction Decimal?  @db.Decimal(12, 2) // PhilHealth Contribution
  pagibigDeduction Decimal?     @db.Decimal(12, 2) // Pag-IBIG Contribution
  gsisDeduction   Decimal?      @db.Decimal(12, 2) // GSIS Contribution (for government employees)
  withholdingTax  Decimal?      @db.Decimal(12, 2) // Withholding Tax (BIR)
  
  status          PayrollStatus @default(DRAFT)
  
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt

  payrollItems    PayrollItem[]

  @@index([employeeId])
  @@index([payPeriodStart, payPeriodEnd])
  @@index([status])
  @@map("payrolls")
}

model PayrollItem {
  id         String          @id @default(cuid())
  payrollId  String
  payroll    Payroll         @relation(fields: [payrollId], references: [id], onDelete: Cascade)
  itemType   PayrollItemType
  name       String
  amount     Decimal         @db.Decimal(12, 2)
  createdAt  DateTime        @default(now())

  @@index([payrollId])
  @@map("payroll_items")
}

enum PayrollStatus {
  DRAFT
  PROCESSING
  APPROVED
  PAID
  CANCELLED
}

enum PayrollItemType {
  EARNING
  DEDUCTION
  TAX
}

// ============================================
// LEAVE MANAGEMENT
// ============================================

model LeaveType {
  id               String   @id @default(cuid())
  name             String   @unique
  code             String   @unique
  description      String?
  daysPerYear      Int
  carryForward     Boolean  @default(false)
  maxCarryForward  Int      @default(0)
  requiresApproval Boolean  @default(true)
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  leaves Leave[]

  @@map("leave_types")
}

model Leave {
  id            String      @id @default(cuid())
  employeeId    String
  employee      Employee    @relation(fields: [employeeId], references: [id])
  leaveTypeId   String
  leaveType     LeaveType   @relation(fields: [leaveTypeId], references: [id])
  
  startDate     DateTime
  endDate       DateTime
  numberOfDays  Decimal     @db.Decimal(4, 1)
  reason        String
  
  status        LeaveStatus @default(PENDING)
  
  createdById   String
  createdBy     User        @relation("CreatedBy", fields: [createdById], references: [id])
  
  approvedById  String?
  approvedBy    User?       @relation("ApprovedBy", fields: [approvedById], references: [id])
  approvedAt    DateTime?
  
  rejectionReason String?
  
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([employeeId])
  @@index([leaveTypeId])
  @@index([status])
  @@index([startDate, endDate])
  @@map("leaves")
}

enum LeaveStatus {
  PENDING
  APPROVED
  REJECTED
  CANCELLED
}

// ============================================
// ATTENDANCE & TIMEKEEPING
// ============================================

model Attendance {
  id          String           @id @default(cuid())
  employeeId  String
  employee    Employee         @relation(fields: [employeeId], references: [id])
  userId      String
  user        User             @relation(fields: [userId], references: [id])
  date        DateTime         @db.Date
  
  clockIn     DateTime?
  clockOut    DateTime?
  
  workHours   Decimal?         @db.Decimal(4, 2)
  overtimeHours Decimal?       @db.Decimal(4, 2)
  
  status      AttendanceStatus @default(PRESENT)
  
  notes       String?
  
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt

  @@unique([employeeId, date])
  @@index([employeeId])
  @@index([date])
  @@map("attendances")
}

enum AttendanceStatus {
  PRESENT
  ABSENT
  LATE
  HALF_DAY
  ON_LEAVE
  HOLIDAY
}

// ============================================
// PERFORMANCE MANAGEMENT
// ============================================

model PerformanceReview {
  id                String             @id @default(cuid())
  employeeId        String
  employee          Employee           @relation(fields: [employeeId], references: [id])
  reviewerId        String
  reviewer          User               @relation(fields: [reviewerId], references: [id])
  
  reviewPeriodStart DateTime
  reviewPeriodEnd   DateTime
  
  overallRating     Decimal            @db.Decimal(3, 2)
  comments          String?
  
  status            ReviewStatus       @default(DRAFT)
  
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt

  reviewItems       PerformanceReviewItem[]
  goals             PerformanceGoal[]

  @@index([employeeId])
  @@index([reviewerId])
  @@map("performance_reviews")
}

model PerformanceReviewItem {
  id           String            @id @default(cuid())
  reviewId     String
  review       PerformanceReview @relation(fields: [reviewId], references: [id], onDelete: Cascade)
  
  criteria     String
  rating       Decimal           @db.Decimal(3, 2)
  comments     String?
  
  createdAt    DateTime          @default(now())

  @@index([reviewId])
  @@map("performance_review_items")
}

model PerformanceGoal {
  id          String            @id @default(cuid())
  reviewId    String?
  review      PerformanceReview? @relation(fields: [reviewId], references: [id])
  
  title       String
  description String
  targetDate  DateTime
  status      GoalStatus        @default(IN_PROGRESS)
  
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt

  @@index([reviewId])
  @@map("performance_goals")
}

enum ReviewStatus {
  DRAFT
  SUBMITTED
  REVIEWED
  COMPLETED
}

enum GoalStatus {
  NOT_STARTED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

// ============================================
// HEALTH & WELLNESS
// ============================================

model HealthRecord {
  id               String   @id @default(cuid())
  employeeId       String
  employee         Employee @relation(fields: [employeeId], references: [id])
  
  recordType       String   // e.g., "Medical Checkup", "Vaccination", "Claim"
  recordDate       DateTime
  description      String
  
  provider         String?
  cost             Decimal? @db.Decimal(12, 2)
  claimStatus      ClaimStatus?
  
  attachmentUrl    String?
  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([employeeId])
  @@map("health_records")
}

enum ClaimStatus {
  PENDING
  APPROVED
  REJECTED
  PAID
}

// ============================================
// JOB MANAGEMENT & RECRUITMENT
// ============================================

model Job {
  id              String          @id @default(cuid())
  title           String
  departmentId    String
  department      Department      @relation(fields: [departmentId], references: [id])
  
  description     String
  requirements    String
  responsibilities String
  
  employmentType  EmploymentType
  salaryMin       Decimal?        @db.Decimal(12, 2)
  salaryMax       Decimal?        @db.Decimal(12, 2)
  
  openings        Int             @default(1)
  status          JobStatus       @default(DRAFT)
  
  publishedAt     DateTime?
  closedAt        DateTime?
  
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt

  applications    JobApplication[]

  @@index([departmentId])
  @@index([status])
  @@map("jobs")
}

model JobApplication {
  id              String              @id @default(cuid())
  jobId           String
  job             Job                 @relation(fields: [jobId], references: [id])
  
  // Applicant Information
  firstName       String
  lastName        String
  email           String
  phoneNumber     String
  resumeUrl       String
  coverLetter     String?
  
  status          ApplicationStatus   @default(SUBMITTED)
  
  employeeId      String?             // If hired
  employee        Employee?           @relation(fields: [employeeId], references: [id])
  
  appliedAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt

  @@index([jobId])
  @@index([email])
  @@index([status])
  @@map("job_applications")
}

enum JobStatus {
  DRAFT
  PUBLISHED
  CLOSED
  CANCELLED
}

enum ApplicationStatus {
  SUBMITTED
  REVIEWING
  SHORTLISTED
  INTERVIEW_SCHEDULED
  INTERVIEWED
  OFFERED
  HIRED
  REJECTED
}

// ============================================
// REPORTS & ANALYTICS
// ============================================

model Report {
  id          String       @id @default(cuid())
  name        String
  description String?
  reportType  String       // e.g., "payroll", "attendance", "leave"
  parameters  Json?
  schedule    String?      // Cron expression for scheduled reports
  isActive    Boolean      @default(true)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  executions  ReportExecution[]

  @@map("reports")
}

model ReportExecution {
  id          String   @id @default(cuid())
  reportId    String
  report      Report   @relation(fields: [reportId], references: [id], onDelete: Cascade)
  
  status      String   // "pending", "completed", "failed"
  fileUrl     String?
  error       String?
  
  executedAt  DateTime @default(now())

  @@index([reportId])
  @@map("report_executions")
}

// ============================================
// AUDIT LOG
// ============================================

model AuditLog {
  id          String   @id @default(cuid())
  userId      String?
  action      String   // e.g., "CREATE", "UPDATE", "DELETE"
  entity      String   // e.g., "Employee", "Payroll"
  entityId    String
  changes     Json?    // Store old and new values
  ipAddress   String?
  userAgent   String?
  timestamp   DateTime @default(now())

  @@index([userId])
  @@index([entity, entityId])
  @@index([timestamp])
  @@map("audit_logs")
}

// ============================================
// ORGANIZATION MANAGEMENT
// ============================================

model Organization {
  id                String   @id @default(cuid())
  name              String   @unique
  slug              String   @unique
  currencyCode      String   @default("PHP")
  dayFormat         String   @default("F d, Y")
  timeFormat        String   @default("h:i:s A")
  timeZone          String   @default("Asia/Manila")
  domain            String?
  employeeIdLabel   String   @default("Employee ID")
  avatar            String?  // URL to avatar image
  isActive          Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([slug])
  @@index([isActive])
  @@map("organizations")
}

// ============================================
// OFFICE MANAGEMENT
// ============================================

model Office {
  id          String   @id @default(cuid())
  name        String
  branchName  String?
  description String?
  
  // Philippine Address Format
  addressLine1  String   // Street/Barangay/Building
  addressLine2  String?  // Subdivision/Village
  barangay      String?  // Barangay
  city          String   // City/Municipality
  province      String   // Province
  region        String   // Region
  zipCode       String
  country       String   @default("Philippines")
  
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  phoneNumbers OfficePhone[]
  emailAddresses OfficeEmail[]
  employees   Employee[] // Employees assigned to this office

  @@index([name])
  @@index([city])
  @@index([province])
  @@index([isActive])
  @@map("offices")
}

model OfficePhone {
  id        String   @id @default(cuid())
  officeId  String
  office    Office   @relation(fields: [officeId], references: [id], onDelete: Cascade)
  countryCode String @default("+63") // Philippine country code
  number    String   // Phone number without country code
  type      String?  // e.g., "Main", "Fax", "Mobile"
  isPrimary Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([officeId])
  @@map("office_phones")
}

model OfficeEmail {
  id        String   @id @default(cuid())
  officeId  String
  office    Office   @relation(fields: [officeId], references: [id], onDelete: Cascade)
  email     String
  type      String?  // e.g., "Main", "Support", "Info"
  isPrimary Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([officeId])
  @@index([email])
  @@map("office_emails")
}

